#!/usr/bin/python
#
# Copyright I.T. Dev Ltd 2014
# http://www.itdev.co.uk
#


import sys
import argparse
import socket

sys.path.insert(0, '/usr/lib')
from mcvirt.mcvirt import McVirt, McVirtException
from mcvirt.parser import Parser, ArgumentParserError

if __name__ == "__main__":

  parser_object = Parser()

  if (len(sys.argv) > 1):
    try:
      parser_object.parse_arguments()
    except ArgumentParserError:
      sys.exit(1)
  else:
    while (1):
      sys.stdout.write('mcvirt@%s> ' % socket.gethostname())
      command = sys.stdin.readline().rstrip().lstrip()
      if (command == 'exit'):
        sys.exit()
      else:
        try:
          parser_object.parse_arguments(command)
        except ArgumentParserError:
          pass